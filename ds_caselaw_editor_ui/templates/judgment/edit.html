{% extends "layouts/judgment.html" %}
{% block content %}
  {% load i18n %}
  <aside class="judgment-info-component">

    <h4>Submission</h4>

    <ul>
      <li>{% translate "judgments.submitter" %} {{context.source_name}}</li>
      <li>{% translate "judgments.submitteremail" %} {{context.source_email}}</li>
      <li>{% translate "judgments.consignmentref" %} {{context.consignment_reference}}</li>
    </ul>

    <h4>Downloads</h4>

    {% if context.docx_url %}
      <a href="{{ context.docx_url }}">{% translate "judgment.download_docx" %}</a>
    {% endif %}
    {% if context.pdf_url %}
      <a href="{{ context.pdf_url }}">{% translate "judgment.download_pdf" %}</a>
    {% endif %}
    <a href="{% url 'detail_xml' %}?judgment_uri={{context.judgment_uri}}">{% translate "judgment.download_xml" %}</a>
  </aside>
  <div class="edit-component">
    <div class="edit-component__container">
      {% if context.success %}
        <div class="edit-component__success">{{ context.success }}</div>
      {% endif %}
      {% if context.error %}
        <div class="edit-component__error">{{ context.error }}</div>
      {% endif %}
      <h2 class="edit-component__header">{% translate "judgment.edit_judgment" %} <span class="judgment-uri">{{context.judgment_uri}}</span></h2>
      <form aria-label="Edit judgment" method="post">
        {% csrf_token %}
        <div class="edit-component__panel">
          <label for="metadata_name">{% translate "judgment.judgment_name" %}</label>
          <input type="text" class="edit-component__metadata_name-input" value="{{context.metadata_name}}"
                 name="metadata_name" id="metadata_name" />
        </div>
        <div class="edit-component__panel">
          <label for="neutral_citation">{% translate "judgment.neutral_citation" %}</label>
          <input type="text" class="edit-component__neutral_citation-input" value="{{context.neutral_citation}}"
                 name="neutral_citation" id="neutral_citation" />
        </div>
        <div class="edit-component__panel">
          <label for="court">{% translate "judgment.court" %}</label>
          <input type="text" class="edit-component__court-input" value="{{context.court}}"
                 name="court" id="court" />
        </div>
        <div class="edit-component__panel">
          <label for="judgment_date">{% translate "judgment.judgment_date" %}</label>
          <input type="text" class="edit-component__judgment_date-input" value="{{context.judgment_date}}"
                 name="judgment_date" id="judgment_date" />
        </div>
        <div class="edit-component__panel">
          <label for="published">{% translate "judgment.published" %}</label>
          <input type="checkbox" class="edit-component__published-input" {% if context.published %}checked{% endif %} name="published" id="published"/>
        </div>
        <div class="edit-component__panel">
          <label for="sensitive">{% translate "judgment.sensitive" %}</label>
          <input type="checkbox" class="edit-component__sensitive-input" {% if context.sensitive %}checked{% endif %} name="sensitive" id="sensitive"/>
        </div>
        <div class="edit-component__panel">
          <label for="supplemental">{% translate "judgment.supplemental" %}</label>
          <input type="checkbox" class="edit-component__supplemental-input" {% if context.supplemental %}checked{% endif %} name="supplemental" id="supplemental"/>
        </div>
        <div class="edit-component__panel">
          <label for="anonymised">{% translate "judgment.anonymised" %}</label>
          <input type="checkbox" class="edit-component__anonymised-input" {% if context.anonymised %}checked{% endif %} name="anonymised" id="anonymised"/>
        </div>
        <div class="edit-component__panel">
          <label for="assigned_to">{% translate "judgment.assigned_to" %}</label>
          <select class="edit-component__assigned_to-input" name="assigned_to" id="assigned_to">
            <option value="" {% if context.assigned_to == "" %}selected{% endif %}>{% translate "judgments.noone" %}</option>
            {% for user in context.users %}
              <option value="{{user.name}}"{% if context.assigned_to == user.name %} selected{% endif %}>{{user.print_name}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="edit-component__panel">
          <input type="hidden" name="judgment_uri" value="{{context.judgment_uri}}"/>
          <input type="submit" value="Save"/>
        </div>
      </form>
    </div>
  </div>
  {% if context.previous_versions %}
    <div class="list-versions-component">
      <div class="list-versions-component__container">
        <h2 class="list-versions-component__header">{% translate "judgment.previous_versions" %}</h2>
        <ul>
          {% for version in context.previous_versions %}
            <li>
              <a class="list-versions__version-title" href="{% url 'detail' %}?judgment_uri={{context.judgment_uri}}&version_uri={{version.uri}}">
                v{{ version.version }} ( {{version.uri}} )
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  {% endif %}
{% endblock content %}
