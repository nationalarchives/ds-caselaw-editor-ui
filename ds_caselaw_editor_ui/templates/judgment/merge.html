{% extends "layouts/judgment.html" %}
{% load i18n waffle_tags %}
{% block content %}
  {% include "includes/judgment/metadata_panel_static.html" with judgment=document %}
  <div class="container">
    <h1 class="judgment-component__confirmation-title">Merging {{ document.body.name }}:</h1>
    {% if not document.check_is_safe_as_merge_source.success %}
      <div class="page-notification--warning">
        <h3>
          <span class="icon icon__triangle-exclamation"></span>
          This document cannot be merged into another one.
        </h3>
        <ul>
          {% for message in document.check_is_safe_as_merge_source.messages %}<li>{{ message }}</li>{% endfor %}
        </ul>
      </div>
    {% else %}
      <form action="{% url 'confirm-merge' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="document_uri" value="{{ document.uri }}" />
        <div class="judgment-component__form-input">
          <label for="document_uri_to_merge">Document URI to merge with:</label>
          <input id="document_uri_to_merge"
                 type="text"
                 name="document_uri_to_merge"
                 placeholder="{{ document.uri }}" />
        </div>
        <div class="judgment-component__button-actions">
          <input type="hidden" name="document_uri" value="{{ document.uri }}" />
          <input class="button-cta" type="submit" value="Verify merge" />
          <span class="judgment-component__back-button"><a href="{% url 'full-text-html' document.uri %}">Go back to review</a> </span>
        </div>
      </form>
    {% endif %}
  </div>
{% endblock content %}
